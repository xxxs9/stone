<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gameloft9.demo.dataaccess.dao.system.PurchaseOrderMapper">

<!--采购订单List-->
<resultMap id="purOrderMap" type="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
    <id column="ID" property="id" jdbcType="VARCHAR"/>
    <result column="ORDER_NUMBER" property="orderNumber" jdbcType="VARCHAR"/>
    <result column="GOODS_ID" property="goodsId" jdbcType="VARCHAR"/>
    <result column="GOODS_NAME" property="goodsName" jdbcType="VARCHAR"/>
    <result column="GOODS_NUMBER" property="goodsNumber" jdbcType="VARCHAR"/>
    <result column="GOODS_PRICE" property="goodsPrice" jdbcType="VARCHAR"/>
    <result column="SUPPLIER_ID" property="supplierId" jdbcType="VARCHAR"/>
    <result column="SUPPLIER_NAME" property="supplierName" jdbcType="VARCHAR"/>
    <result column="PRICE" property="price" jdbcType="VARCHAR"/>
    <result column="TOTAL_PRICE" property="totalPrice" jdbcType="VARCHAR"/>
    <result column="APPLY_USER" property="applyUser" jdbcType="VARCHAR"/>
    <result column="APPLY_TIME" property="applyTime" jdbcType="TIMESTAMP"/>
    <result column="APPLY_PAY_TIME" property="applyPayTime" jdbcType="TIMESTAMP"/>
    <result column="STATE" property="state" jdbcType="VARCHAR"/>
    <result column="FINANCE_STATE" property="financeState" jdbcType="VARCHAR"/>
    <result column="ORDER_AUDIT_USER" property="orderAuditUser" jdbcType="VARCHAR"/>
    <result column="ORDER_AUDIT_TIME" property="orderAuditTime" jdbcType="TIMESTAMP"/>
    <result column="APPLY_DESCRIBE" property="applyDescribe" jdbcType="VARCHAR"/>
    <result column="AUDIT_DESCRIBE" property="auditDescribe" jdbcType="VARCHAR"/>
    <result column="FINANCE_AUDIT_USER" property="financeAuditUser" jdbcType="VARCHAR"/>
    <result column="FINANCE_AUDIT_TIME" property="financeAuditTime" jdbcType="TIMESTAMP"/>
    <result column="AUDIT_TYPE" property="auditType" jdbcType="INTEGER"/>
    <result column="FINANCE_AUDIT_DESCRIBE" property="financeAuditDescribe" jdbcType="VARCHAR"/>
    <result column="DEPOT_STATE" property="depotState" jdbcType="VARCHAR"/>
    <result column="DEPOT_USER" property="depotUser" jdbcType="VARCHAR"/>
    <result column="DEPOT_TIME" property="depotTime" jdbcType="TIMESTAMP"/>
    <result column="DEPOT_DESCRIBE" property="depotDescribe" jdbcType="VARCHAR"/>
</resultMap>

<!--原料商品List 需要ID来获取原料名称-->
<resultMap id="materGoodsMap" type="com.gameloft9.demo.dataaccess.model.system.SysMaterial">
    <id column="ID" property="id" jdbcType="VARCHAR"/>
    <result column="GOODS_NAME" property="goodsName" jdbcType="VARCHAR"/>
</resultMap>

<!--原料商品 价格-->
<resultMap id="materMap" type="com.gameloft9.demo.dataaccess.model.system.SysMaterialGoods">
    <id column="ID" property="id" jdbcType="VARCHAR"/>
    <result column="GOODS_PRICE" property="goodsPrice" jdbcType="VARCHAR"/>
</resultMap>

<!--原料商品List 需要ID来获取原料名称-->
<resultMap id="publicMap" type="com.gameloft9.demo.dataaccess.model.system.Public">
    <result column="GOODS_NAME" property="goodsName" jdbcType="VARCHAR"/>
    <result column="GOODS_PRICE" property="goodsPrice" jdbcType="VARCHAR"/>
    <result column="SUPPLIER_NAME" property="supplierName" jdbcType="VARCHAR"/>
    <result column="ID" property="id" jdbcType="VARCHAR"/>
</resultMap>

    <!--分页查找所有-->
    <select id="selectAll" resultMap="purOrderMap">
        SELECT
            t.ID,
            t.GOODS_ID,
            t.ORDER_NUMBER,
            t.GOODS_NAME,
            t.GOODS_NUMBER,
            t.SUPPLIER_NAME,
            t.PRICE,
            t.TOTAL_PRICE,
            t.APPLY_USER,
            t.APPLY_TIME,
            t.STATE,
            t.APPLY_DESCRIBE
        FROM
            t_purchase_order t,
            sys_material m,
            sys_supplier s
        <where>
            <if test="goodsName != null and goodsName != ''">
                AND t.GOODS_NAME = #{goodsName}
            </if>
            <if test="state != null and state != ''">
                AND t.STATE = #{state}
            </if>
            AND m.GOODS_NAME = t.GOODS_NAME
            AND s.SUPPLIER_NAME = t.SUPPLIER_NAME
        </where>
            ORDER BY t.APPLY_TIME DESC
        limit #{start,jdbcType=DECIMAL},#{end,jdbcType=DECIMAL}
    </select>

    <!--审核所获取的列表-->
    <select id="selectAllByInspect" resultMap="purOrderMap" parameterType="java.lang.String">
        SELECT
            ID,
            GOODS_ID,
            ORDER_NUMBER,
            GOODS_NAME,
            SUPPLIER_NAME,
            GOODS_NUMBER,
            PRICE,
            TOTAL_PRICE,
            APPLY_USER,
            APPLY_TIME,
            APPLY_DESCRIBE,
            STATE,
            ORDER_AUDIT_USER,
            ORDER_AUDIT_TIME,
            AUDIT_DESCRIBE,
            FINANCE_STATE
        FROM
            t_purchase_order
        <where>
            <if test="financeState != null and financeState != ''">
                and FINANCE_STATE=#{financeState,jdbcType=VARCHAR}
            </if>
            <if test="state != null and state != ''">
                and STATE=#{state,jdbcType=VARCHAR}
            </if>
            <if test="goodsName != null and goodsName != ''">
                and GOODS_NAME=#{goodsName,jdbcType=VARCHAR}
            </if>
                and STATE != '未提交'
        </where>
        ORDER BY APPLY_TIME DESC
    </select>

    <!--根据id获取-->
    <select id="selectByPrimaryKey" resultMap="purOrderMap" parameterType="java.lang.String">
        SELECT
            *
        FROM
            t_purchase_order
        WHERE
            ID=#{id}
    </select>

    <!--根据orderNumber获取-->
    <select id="selectByOrderNumber" resultMap="purOrderMap" parameterType="java.lang.String">
        SELECT
            *
        FROM
            t_purchase_order
        WHERE
            ORDER_NUMBER=#{orderNumber}
    </select>

    <!--增加-->
    <insert id="insert" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        INSERT INTO
            t_purchase_order
              (ID,
              GOODS_ID,
              ORDER_NUMBER,
              GOODS_NAME,
              GOODS_NUMBER,
              PRICE,
              SUPPLIER_NAME,
              TOTAL_PRICE,
              APPLY_USER,
              APPLY_TIME,
              STATE,
              AUDIT_TYPE,
              APPLY_DESCRIBE)
        VALUES
              (#{id},
              #{goodsId},
              #{orderNumber},
              #{goodsName},
              #{goodsNumber},
              #{price},
              #{supplierName},
              #{totalPrice},
              #{applyUser},
              #{applyTime},
              #{state},
              #{auditType},
              #{applyDescribe})
    </insert>

    <!--删除-->
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        DELETE FROM
            t_purchase_order
        WHERE
            ID=#{id}
    </delete>

    <!--修改-->
    <update id="updateByPrimaryKey" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        SET
            ORDER_NUMBER=#{orderNumber},
            GOODS_NAME=#{goodsName},
            GOODS_NUMBER=#{goodsNumber},
            PRICE=#{price},
            SUPPLIER_NAME=#{supplierName},
            TOTAL_PRICE=#{totalPrice},
            APPLY_USER=#{applyUser},
            APPLY_TIME=#{applyTime},
            APPLY_PAY_TIME=#{applyPayTime},
            STATE=#{state},
            FINANCE_STATE=#{financeState},
            ORDER_AUDIT_USER=#{orderAuditUser},
            ORDER_AUDIT_TIME=#{orderAuditTime},
            APPLY_DESCRIBE=#{applyDescribe},
            AUDIT_DESCRIBE=#{auditDescribe},
            FINANCE_AUDIT_USER=#{financeAuditUser},
            FINANCE_AUDIT_TIME=#{financeAuditTime},
            AUDIT_TYPE=#{auditType},
            FINANCE_AUDIT_DESCRIBE=#{financeAuditDescribe},
            DEPOT_STATE=#{depotState}
        WHERE
            ID=#{id}
    </update>
    
    <!--总条数查询所有-->
    <select id="countGetAll" resultType="int" parameterType="Map">
        SELECT
            count(1)
        FROM
            t_purchase_order t
        <where>
            <if test="goodsName != null and goodsName != ''">
                AND t.GOODS_NAME = #{goodsName}
            </if>
            <if test="state != null and state != ''">
                AND t.state = #{state}
            </if>
            <if test="financeState != null and financeState != ''">
                AND FINANCE_STATE=#{financeState,jdbcType=VARCHAR}
            </if>
        </where>
    </select>

    <!--货品名称goodsId下拉框-->
    <select id="getSelectListGoods" resultMap="purOrderMap">
        SELECT
            m.GOODS_NAME,
            g.ID
        FROM
            sys_material m,
            sys_material_goods g
        WHERE
            g.MATERIAL_ID = m.ID
    </select>

    <!--订单状态state下拉框-->
    <select id="getSelectListState" resultType="java.lang.String">
        SELECT DISTINCT
            STATE
        FROM
            t_purchase_order
    </select>

    <!--财务审核状态financeState下拉框-->
    <select id="getSelectListFinance" resultType="java.lang.String">
        SELECT DISTINCT
            FINANCE_STATE
        FROM
            t_purchase_order
    </select>

    <!--查看 look-->
    <select id="lookSelect" resultMap="purOrderMap" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        SELECT
            ID,
            STATE,
            ORDER_AUDIT_USER,
            ORDER_AUDIT_TIME,
            AUDIT_DESCRIBE,
            DEPOT_STATE,
            DEPOT_USER,
            DEPOT_TIME,
            DEPOT_DESCRIBE
        FROM
            t_purchase_order
        WHERE
            ID=#{id}
    </select>

    <!--查看后修改 lookUpdate-->
    <update id="lookUpdate" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        SET
            STATE=#{state},
            ORDER_AUDIT_USER=#{orderAuditUser},
            ORDER_AUDIT_TIME=#{orderAuditTime},
            AUDIT_DESCRIBE=#{auditDescribe}
        WHERE
            ID=#{id}
    </update>

    <!--提交 commit-->
    <update id="commitUpdate" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        <set>
            <if test="state != null and state !=''">
                STATE = #{state,jdbcType=VARCHAR}
            </if>
        </set>
        <where>
           <if test="id != null and id != ''">
               AND ID = #{id,jdbcType=VARCHAR}
           </if>
        </where>
    </update>

    <!--撤回 recall-->
    <update id="recallUpdate" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        <set>
            <if test="state != null and state != ''">
                STATE = #{state,jdbcType=VARCHAR}
            </if>
        </set>
        <where>
            <if test="id != null and id != ''">
                AND ID = #{id,jdbcType=VARCHAR}
            </if>
        </where>    
    </update>
    
    <!--仓管审核时的修改-->
    <update id="inspectUpdate" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        SET
            STATE=#{state},
            ORDER_AUDIT_USER=#{orderAuditUser},
            ORDER_AUDIT_TIME=#{orderAuditTime},
            AUDIT_DESCRIBE=#{auditDescribe}
        WHERE
            ID=#{id}
    </update>

    <!--查找所有待付款啊  List<PurchaseOrder> getAllPurchaseOrderByState();-->
    <select id="getAllPurchaseOrderByState" resultMap="purOrderMap">
        SELECT
            *
        FROM
            t_purchase_order
        WHERE
            FINANCE_STATE = '待审核'
    </select>

    <!--采购收货管理 获取需要字段List-->
    <select id="selectAllByInOrder" resultMap="purOrderMap">
        SELECT
            t.ID,
            t.ORDER_NUMBER,
            t.GOODS_ID,
            t.GOODS_NAME,
            t.GOODS_NUMBER,
            t.PRICE,
            t.SUPPLIER_NAME,
            t.TOTAL_PRICE,
            t.APPLY_USER,
            t.APPLY_TIME,
            t.APPLY_PAY_TIME,
            t.FINANCE_AUDIT_USER,
            t.FINANCE_AUDIT_TIME,
            t.FINANCE_STATE,
            t.DEPOT_STATE,
            t.DEPOT_USER,
            t.DEPOT_TIME,
            t.DEPOT_DESCRIBE
        FROM
            t_purchase_order t,
            sys_material m
        <where>
            <if test="goodsName != null and goodsName != ''">
                AND t.GOODS_NAME = #{goodsName,jdbcType=VARCHAR}
            </if>
            <if test="depotState != null and depotState != ''">
                AND t.DEPOT_STATE = #{depotState,jdbcType=VARCHAR}
            </if>
            AND t.FINANCE_STATE IN("已付款","未通过")
            AND m.GOODS_NAME = t.GOODS_NAME
        </where>
        ORDER BY APPLY_TIME DESC
    </select>

    <!--总条数查询所有-->
    <select id="countGetAllByInOrder" resultType="int" parameterType="Map">
        SELECT
            count(1)
        FROM
            t_purchase_order t
        <where>
            <if test="goodsName != null and goodsName != ''">
                AND t.GOODS_NAME = #{goodsName}
            </if>
            <if test="depotState != null and depotState != ''">
                AND t.DEPOT_STATE = #{depotState}
            </if>
        </where>
    </select>

    <!--采购收货 仓库审核状态 收货、确认、提交、撤回-->
    <update id="toolsUpdate" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        <set>
            <if test="depotState != null and depotState != ''">
                DEPOT_STATE = #{depotState,jdbcType=VARCHAR}
            </if>
        </set>
        <where>
            <if test="id != null and id != ''">
                AND ID = #{id,jdbcType=VARCHAR}
            </if>
        </where>
    </update>

    <!--采购入库 编辑信息-->
    <update id="InUpdate" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        SET
            ORDER_NUMBER=#{orderNumber},
            GOODS_NAME=#{goodsName},
            GOODS_NUMBER=#{goodsNumber},
            SUPPLIER_NAME=#{supplierName},
            PRICE=#{price},
            TOTAL_PRICE=#{totalPrice},
            APPLY_USER=#{applyUser}
        WHERE
            ID=#{id}
    </update>

    <!--采购入库 查看审核未通过原因-->
    <update id="lookIn" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        SET
            DEPOT_STATE=#{depotState},
            DEPOT_USER=#{depotUser},
            DEPOT_TIME=#{depotTime},
            DEPOT_DESCRIBE=#{depotDescribe}
        WHERE
            ID=#{id}
    </update>

    <!--选取goodsName下拉框内容，自动获取price价格-->
    <select id="selectPriceByGoodsId" resultMap="publicMap">
        SELECT
            d.ID,
            d.GOODS_PRICE,
            s.SUPPLIER_NAME
        FROM
            sys_material_goods d,
            sys_material m,
            sys_supplier s
        WHERE
            m.GOODS_NAME=#{goodsName}
        AND
            m.ID = d.MATERIAL_ID
        AND
            s.ID = d.SUPPLIER_ID
    </select>

    <!--获取orderNumber下拉框 根据state=审核通过-->
    <select id="selectAllByOrderNumber" resultType="java.lang.String">
        SELECT
            ORDER_NUMBER
        FROM
            t_purchase_order
        WHERE
            STATE='审核通过'
    </select>

    <!--订单详情 所有数据-->
    <update id="selectAllBySearch" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        UPDATE
            t_purchase_order
        SET
            GOODS_NAME=#{goodsName},
            SUPPLIER_NAME=#{supplierName},
            GOODS_NUMBER=#{goodsNumber},
            PRICE=#{price},
            TOTAL_PRICE=#{totalPrice},
            APPLY_USER=#{applyUser},
            APPLY_TIME=#{applyTime},
            APPLY_DESCRIBE=#{applyDescribe},
            ORDER_AUDIT_USER=#{orderAuditUser},
            ORDER_AUDIT_TIME=#{orderAuditTime},
            AUDIT_DESCRIBE=#{auditDescribe}
        WHERE
            ORDER_NUMBER=#{orderNumber}
    </update>

    <!--根据订单编号获取id-->
    <select id="selectGoodsIdByGoodsName" resultType="java.lang.String">
        SELECT
            ID
        FROM
            sys_material,
        WHERE
            GOODS_NAME = #{goodsName},
    </select>

    <!--4月报表-->
    <select id="selectChartByApril" resultType="java.lang.String">
        SELECT
            SUM(GOODS_NUMBER)
        FROM
            t_purchase_order
        WHERE
            DEPOT_STATE='审核通过'
        AND
            MONTH(DEPOT_TIME) = 4
		GROUP BY
		    GOODS_NAME
    </select>

    <!--报表获取goodsName-->
    <select id="selectGoodsNameAll" resultType="java.lang.String">
        SELECT DISTINCT
            GOODS_NAME
        FROM
            t_purchase_order
    </select>

    <!--阿发包  财务管理人员  根据财务审核状态来获取内容,分页-->
    <select id="getAllByFinance" resultMap="purOrderMap">
        SELECT
            ID,
            ORDER_NUMBER,
            GOODS_NAME,
            GOODS_NUMBER,
            PRICE,
            APPLY_USER,
            APPLY_TIME,
            APPLY_PAY_TIME,
            STATE,
            TOTAL_PRICE,
            FINANCE_STATE,
            ORDER_AUDIT_USER,
            ORDER_AUDIT_TIME,
            APPLY_DESCRIBE,
            AUDIT_DESCRIBE,
            FINANCE_AUDIT_USER,
            FINANCE_AUDIT_TIME,
            AUDIT_TYPE,
            FINANCE_AUDIT_DESCRIBE,
            DEPOT_STATE,
            DEPOT_USER,
            DEPOT_TIME,
            DEPOT_DESCRIBE
        FROM
            t_purchase_order
        WHERE
            FINANCE_STATE='待审核'
        AND limit #{start,jdbcType=DECIMAL},#{end,jdbcType=DECIMAL}
    </select>

    <!--阿发包  财务经理审核状态：付款申请-->
    <select id="selectApplyByFinance" resultMap="purOrderMap">
        SELECT
            ID,
            ORDER_NUMBER,
            GOODS_NAME,
            GOODS_NUMBER,
            PRICE,
            TOTAL_PRICE,
            APPLY_USER,
            APPLY_TIME,
            APPLY_PAY_TIME,
            STATE,
            FINANCE_STATE,
            ORDER_AUDIT_USER,
            ORDER_AUDIT_TIME,
            APPLY_DESCRIBE,
            AUDIT_DESCRIBE,
            FINANCE_AUDIT_USER,
            FINANCE_AUDIT_TIME,
            AUDIT_TYPE,
            FINANCE_AUDIT_DESCRIBE,
            DEPOT_STATE,
            DEPOT_USER,
            DEPOT_TIME,
            DEPOT_DESCRIBE
        FROM
            t_purchase_order
        WHERE
            FINANCE_STATE='付款申请'
        AND limit #{start,jdbcType=DECIMAL},#{end,jdbcType=DECIMAL}
    </select>

    <!--华锋  仓库审核人员  审核入库单-->
    <select id="selectApplyByDepot" resultMap="purOrderMap">
        SELECT
            ID,
            ORDER_NUMBER,
            GOODS_NAME,
            GOODS_NUMBER,
            PRICE,
            TOTAL_PRICE,
            APPLY_USER,
            APPLY_TIME,
            APPLY_PAY_TIME,
            STATE,
            FINANCE_STATE,
            ORDER_AUDIT_USER,
            ORDER_AUDIT_TIME,
            APPLY_DESCRIBE,
            AUDIT_DESCRIBE,
            FINANCE_AUDIT_USER,
            FINANCE_AUDIT_TIME,
            AUDIT_TYPE,
            FINANCE_AUDIT_DESCRIBE,
            DEPOT_STATE,
            DEPOT_USER,
            DEPOT_TIME,
            DEPOT_DESCRIBE
        FROM
            t_purchase_order
        WHERE
            DEPOT_STATE='入库单审核中'
    </select>

    <!--啊发包 根据id和state更新pruchaseOrder   void updateByIdAndState(PurchaseOrder purchaseOrder);-->
    <update id="updateByIdAndState" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        update t_purchase_order
        <set>
            <if test="financeState != null and financeState != ''">
                FINANCE_STATE=#{financeState,jdbcType=VARCHAR}
            </if>
        </set>
        <where>
            <if test="id != null and id != '' ">
                and ID=#{id,jdbcType=VARCHAR}
            </if>
            <if test="auditType != null and auditType != ''">
                and AUDIT_TYPE=#{auditType,jdbcType=INTEGER}
            </if>
        </where>
    </update>

    <!--啊发包  根据id和订单类型    PurchaseOrder findByIdAndAuditType(String id,Integer auditType);-->
    <select id="findByIdAndAuditType" resultMap="purOrderMap">
        select * from t_purchase_order
        <where>
            <if test="id != null and id != '' ">
                and ID=#{id,jdbcType=VARCHAR}
            </if>
            <if test="auditType != null and auditType != ''">
                and AUDIT_TYPE=#{auditType,jdbcType=INTEGER}
            </if>
        </where>
    </select>

    <!--啊发包  更新purchaseOrder的财务审核状态  void purchaseOrderPayPass(PurchaseOrder purchaseOrder);-->
    <update id="purchaseOrderPayPass" parameterType="com.gameloft9.demo.dataaccess.model.system.PurchaseOrder">
        update t_purchase_order
        <set>
            <if test="financeState != null and financeState != ''">
                FINANCE_STATE=#{financeState,jdbcType=VARCHAR},
            </if>
            <if test="financeAuditUser != null and financeAuditUser != ''">
                FINANCE_AUDIT_USER=#{financeAuditUser,jdbcType=VARCHAR},
            </if>
            <if test="financeAuditTime != null and financeAuditTime != ''">
                FINANCE_AUDIT_TIME=#{financeAuditTime,jdbcType=VARCHAR},
            </if>
            <if test="financeAuditDescribe != null and financeAuditDescribe != ''">
                FINANCE_AUDIT_DESCRIBE=#{financeAuditDescribe,jdbcType=VARCHAR},
            </if>
            <if test="depotState != null and depotState != ''">
                DEPOT_STATE=#{depotState,jdbcType=VARCHAR}
            </if>

        </set>
        <where>
            <if test="id != null and id != '' ">
                and ID=#{id,jdbcType=VARCHAR}
            </if>
            <if test="auditType != null and auditType != ''">
                and AUDIT_TYPE=#{auditType,jdbcType=INTEGER}
            </if>
        </where>
    </update>

    <!--啊发包 根据orderNumber获取purchaseOrder PurchaseOrder findByOrderNumber(@Param("orderNumber") String orderNumber);-->
    <select id="findByOrderNumber" resultMap="purOrderMap">
        select * from t_purchase_order
        <where>
            <if test="orderNumber != null and orderNumber != '' ">
                and ORDER_NUMBER=#{orderNumber,jdbcType=VARCHAR}
            </if>
        </where>
    </select>
</mapper>